## 1️⃣ 스케줄링의 개요

> **CPU 스케줄링**

- CPU 스케줄러 : 프로세스가 생성된 후 종료될 때까지 모든 상태 변화를 조정
- CPU 스케줄링 : CPU 스케줄러가 하는 모든 작업

> **스케줄링의 단계**

- 고수준 스케줄링(장기 스케줄링) : 시스템 내의 프로세스 수(멀티프로그래밍 정도)를 조절
- 중간수준 스케줄링(중기 스케줄링) : 전체 시스템의 활성화된 프로세스 수를 조절하여 과부하를 막는 것
- 저수준 스케줄링(단기 스케줄링) : 어떤 프로세스에 CPU를 할당할지, 어떤 프로세스를 대기상태로 보낼지 등을 결정하는 것

> **스케줄링의 목적**

- 공평성: 모든 프로세스가 자원을 공평하게 배정받아야 하며, 자원 배정 과정에서 특정 프로세스가 배제되면 안됨
- 효율성: 시스템 자원이 유휴 시간 없이 사용되도록 스케줄링을 하고, 유휴 자원을 사용하려는 프로세스에는 우선권을 주어야 함
- 안정성: 우선순위를 사용하여 중요 프로세스가 먼저 작동하도록 배정함으로써 시스템 자원을 점유하거나 파괴하려는 프로세스로부터 자원을 보호해야 함.
- 확장성: 프로세스가 증가해도 시스템이 안정적으로 작동하도록 해야 한다. 또한 시스템 자원이 늘어나는 경우 이 혜택이 시스템에 반영되게 해야 함.
- 반응 시간 보장: 응답이 없는 경우 사용자는 시스템이 멈춘 것으로 가정하기 때문에 시스템은 적절한 시간 안에 프로세스의 요구에 반응해야 함
- 무한 연기 방지: 특정 프로세스의 작업이 무한히 연기되면 안됨

<br/>

## 2️⃣ 스케줄링 시 고려사항

> **선점형 스케줄링 VS 비선점형 스케줄링**

- **선점형 스케줄링** : 어떤 프로세스가 CPU를 할당받아 실행 중이더라도 운영체제가 CPU를 강제로 빼앗을 수 있는 스케줄링 방식. 프로세스가 CPU를 독점할 수 없어 대화형이나 시분할 시스템에 적합하지만, 문맥 교환의 오버헤드가 많음
- **비선점형 스케줄링** : 어떤 프로세스가 CPU를 점유하면 다른 프로세스가 이를 빼앗을 수 없는 스케줄링 방식. CPU 스케줄러의 작업량이 적고 문맥 교환의 오버헤드가 적지만, 기다리는 프로세스가 많아 처리율이 낮음

> **CPU 집중 프로세스 VS 입출력 집중 프로세스**

- **CPU 집중 프로세스** : 수학 연산과 같이 CPU를 많이 사용하는 프로세스. 즉 CPU 버스트가 많은 프로세스
- **입출력 집중 프로세스** : 저장장치에서 데이터를 복하는 일과 같이 입출력을 많이 사용하는 프로세스. 즉 입출력 버스트가 많은 프로세스

> **전면 프로세스 VS 후면 프로세스**

- **전면 프로세스** : GUI를 사용하는 운영체제에서 화면의 맨 앞에 놓인 프로세스. 현재 입력과 출력을 사용하는 프로세스이며, 사용자와 상호작용이 가능하여 **상호작용 프로세스**
- **후면 프로세스** : 사용자와 상호작용이 없는 프로세스. 압축 프로그램처럼 사용자의 입력 없이 작동하기 때문에 **일괄 작업 프로세스**

> **정리**

- 우선순위가 높은 프로세스 : 커널 프로세스, 전면 프로세스, 대화형 프로세스, 입출력 집중 프로세스
- 우선순위가 낮은 프로세스 : 일반 프로세스, 후면 프로세스, 일괄 작업 프로세스, CPU 집중 프로세스

<br/>

## 3️⃣ 다중큐

> **다중 큐**

- 프로세스를 효율적으로 관리하기위해 큐를 여러개 두어 관리하는 것
- **준비 상태의 다중 큐** : 우선순위에 별로 운영. 한 번에 하나의 프로세스에 CPU를 할당함
- **대기 상태의 다중 큐** : 같은 입출력을 요구한 프로세스들을 모아 놓은 대기 큐. 여러 개의 프로세스 제어 블록을 동시에 준비 상태로 옮김

<br/>

## 4️⃣ 스케줄링 알고리즘

> **스케줄링 알고리즘의 종류**

| 구분              | 종류                                                                              |
| ----------------- | --------------------------------------------------------------------------------- |
| 비선점형 알고리즘 | FCFS 스케줄링, SJF 스케줄링, HRN 스케줄링                                         |
| 선점형 알고리즘   | 라운드 로빈 스케줄링, SRT 스케줄링, 다단계 큐 스케줄링, 다단계 피드백 큐 스케줄링 |
| 둘 다 가능        | 우선순위 스케줄링                                                                 |

> **스케줄링 알고리즘의 선택 기준**

- **CPU 사용률** : 전체 시스템의 동작 시간 중 CPU가 사용된 시간을 측정하는 방법
- **처리량** : 단위 시간당 작업을 마친 프로세스의 수
- **대기 시간** : 작업을 요청한 프로세스가 작업을 시작하기 전까지 대기하는 시간
- **응답 시간** : 프로세스 시작 후 첫 번째 출력 또는 반응이 나올 때까지 걸리는 시간
- **실행 시간** : 프로세스 작업이 시작된 후 종료되기까지의 시간
- **반환 시간** : 프로세스가 생성된 후 종류되어 사용하던 자원을 모두 반환하는 데까지 걸리는 시간

> **FCFS 스케줄링(First Come First Service), 선입선출 스케줄링**

- 준비 큐에 도착한 순서대로 CPU를 할당하는 비선점형 방식
- **콘보이 효과(convoy effect)**
  긴 프로세스가 CPU를 차지할 때 다른 프로세스들의 대기시간이 길어져 시스템의 효율성이 떨어지는 문제

> **SJF 스케줄링(Shortest Job First), 최단 작업 우선 스케줄링**

- 준비 큐에 있는 프로세스 중 실행 시간이 가장 짧은 작업부터 CPU를 할당하는 비선점형 방식

> **HRN 스케줄링(Highest Response Ratio Next), 최고 응답률 우선 스케줄링**

- CPU를 할당 받기 위해 기다린 시간과 CPU 사용 시간을 고려하여 스케줄링 하는 방식

> **라운드 로빈 스케줄링(Round Robin, RR), 순환 순서 방식**

- 한 프로세스가 할당받은 시간(타임 슬라이스) 동안 작업을 하다가 작업을 완료하지 못하면 준비 큐의 맨 뒤로 가서 자기 차례를 기다리는 방식

> **SRT 스케줄링(Shortest Remaining Time), 최소 잔류 시간 우선 스케줄링**

- 라운드 로빈 스케줄링 기반으로 CPU를 할당받을 프로세스를 선택할 때 남아 있는 작업 시간이 가장 적은 프로세스를 선택하는 선점형 방식

> **우선순위 스케줄링(Priority)**

- 프로세스의 중요도에 따라 우선순위를 반영하여 CPU를 할당하는 방식으로 선점형, 비선점형 둘다 구현 가능
- **고정 우선순위 방식** : 운영체제가 프로세스에 우선순위를 부여하면 프로세스가 끝날때까지 바뀌지 않는 방식으로 구현하기 쉽지만 유연하지 못해 효율이 좋지 않음
- **변동 우선순위 방식** : 프로젝트 생성 시 부여받은 우선순위가 프로세스 작업 중간에 변하는 방식으로 구현하기 어렵지만 효율성이 좋음

> **다단계 큐 스케줄링(multilevel queue)**

- 스케줄링의 우선순위에 따라 준비 큐를 여러개 사용하는 비선점형 방식
- 프로세스는 운영체제로부터 부여받은 우선순위에 따라 해당 우선순위의 큐에 삽입되어 우선순위 대로 프로세스의 작업 실행
- 우선순위가 높은 상위 큐 프로세스의 작업이 끝나기 전에 하위 큐 프로세스 작업을 할수 없음

> **다단계 피드백 큐 스케줄링(multilevel feedback queue)**

- 다단계 큐 스케줄링의 문제점을 보완한 방식으로 기본적 형태가 동일하지만, CPU를 사용하고 난 프로세스가 원래 큐로 돌아가지 않고 우선순위가 하나 낮은 큐의 끝으로 삽입
- 오늘날의 운영체제가 CPU 스케줄링을 위해 일반적으로 사용하는 방식
